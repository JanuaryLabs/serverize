---
// src/components/posthog.astro
---

<script is:inline>
  const isLocalhost = window.location.hostname === 'localhost';
  if (!isLocalhost) {
    !(function (t) {
      if (window.ko) return;
      (window.ko = []),
        [
          'identify',
          'track',
          'removeListeners',
          'on',
          'off',
          'qualify',
          'ready',
        ].forEach(function (t) {
          ko[t] = function () {
            var n = [].slice.call(arguments);
            return n.unshift(t), ko.push(n), ko;
          };
        });
      var n = document.createElement('script');
      (n.async = !0),
        n.setAttribute(
          'src',
          'https://cdn.getkoala.com/v1/pk_04839d4c57a283033380a85777e54438647e/sdk.js',
        ),
        (document.body || document.head).appendChild(n);
    })();
  }
</script>
<script is:inline>
  !(function (t, e) {
    var o, n, p, r;
    e.__SV ||
      ((window.posthog = e),
      (e._i = []),
      (e.init = function (i, s, a) {
        function g(t, e) {
          var o = e.split('.');
          2 == o.length && ((t = t[o[0]]), (e = o[1])),
            (t[e] = function () {
              t.push([e].concat(Array.prototype.slice.call(arguments, 0)));
            });
        }
        ((p = t.createElement('script')).type = 'text/javascript'),
          (p.async = !0),
          (p.src = s.api_host + '/static/array.js'),
          (r = t.getElementsByTagName('script')[0]).parentNode.insertBefore(
            p,
            r,
          );
        var u = e;
        for (
          void 0 !== a ? (u = e[a] = []) : (a = 'posthog'),
            u.people = u.people || [],
            u.toString = function (t) {
              var e = 'posthog';
              return (
                'posthog' !== a && (e += '.' + a), t || (e += ' (stub)'), e
              );
            },
            u.people.toString = function () {
              return u.toString(1) + '.people (stub)';
            },
            o =
              'capture identify alias people.set people.set_once set_config register register_once unregister opt_out_capturing has_opted_out_capturing opt_in_capturing reset isFeatureEnabled onFeatureFlags getFeatureFlag getFeatureFlagPayload reloadFeatureFlags group updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures getActiveMatchingSurveys getSurveys getNextSurveyStep onSessionId'.split(
                ' ',
              ),
            n = 0;
          n < o.length;
          n++
        )
          g(u, o[n]);
        e._i.push([i, s, a]);
      }),
      (e.__SV = 1));
  })(document, window.posthog || []);
  posthog.init('phc_PORJdMHMucNgcwabzQbEsaCrvfe23rQH8iDMAFaLwlS', {
    api_host: 'https://us.i.posthog.com',
    person_profiles: 'identified_only',
    autocapture: !isLocalhost,
    capture_pageview: true, // Disable automatic pageview capture, as we capture manually
    capture_pageleave: !isLocalhost, // Enable automatic pageleave capture
    capture_performance: !isLocalhost, // Enable performance monitoring
    loaded: function (ph) {
      if (isLocalhost) {
        ph.opt_out_capturing(); // opts a user out of event capture
        ph.set_config({ disable_session_recording: true });
      }
    },
  });
</script>

<script
 defer
 data-site-id="serverize.sh"
 src="https://assets.onedollarstats.com/tracker.js">
</script>